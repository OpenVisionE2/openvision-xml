language: python

sudo: required
dist: bionic

addons:
  apt:
    packages:
    - git
    - build-essential
    - automake
    - libtool
    - python-dev
    - python-bs4
    - python-beautifulsoup
    - python-requests
    - python-html5lib
    - gettext
    - swig

python:
  - "2.7"

cache: pip

install:
- pip install -r requirements.txt

git:
  depth: 10

jobs:
  include:
    - stage: python
      script: python -m compileall .
    - stage: iso-639-3
      script: ./iso-639-3.sh
    - stage: atsc-cables-terrestrial
      script: ./atsc-cables-terrestrial.sh
    - stage: timezone
      script: ./timezone.sh
    - stage: america
      script: ./lyngsat-america.sh
    - stage: asia
      script: ./lyngsat-asia.sh
    - stage: atlantic
      script: ./lyngsat-atlantic.sh
    - stage: europe
      script: ./lyngsat-europe.sh
    - stage: all
      script: ./lyngsat-all.sh

after_success:
- ./build.sh
